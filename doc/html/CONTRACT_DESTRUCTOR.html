<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Macro CONTRACT_DESTRUCTOR</title>
<link rel="stylesheet" href="doc/html/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="index.html" title="Contract++ 0.3.490">
<link rel="up" href="reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.macros_hpp" title="Header &lt;contract/macros.hpp&gt;">
<link rel="prev" href="CONTRACT_CONSTRUCTOR.html" title="Macro CONTRACT_CONSTRUCTOR">
<link rel="next" href="CONTRACT_FUNCTION.html" title="Macro CONTRACT_FUNCTION">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="CONTRACT_CONSTRUCTOR.html"><img src="./doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.macros_hpp"><img src="./doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="index.html"><img src="./doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="CONTRACT_FUNCTION.html"><img src="./doc/html/images/next.png" alt="Next"></a>
</div>
<hr>
<div class="refentry" lang="en">
<a name="CONTRACT_DESTRUCTOR"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Macro CONTRACT_DESTRUCTOR</span></h2>
<p>CONTRACT_DESTRUCTOR</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="emphasis"><em>// In header: &lt;<a class="link" href="reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.macros_hpp" title="Header &lt;contract/macros.hpp&gt;">contract/macros.hpp</a>&gt;

</em></span>CONTRACT_DESTRUCTOR(sequence)</pre></div>
<div class="refsect1" lang="en">
<a name="id2663981"></a><h2>Description</h2>
<p>Macro used to write contracts for destructors.</p>
<p>This macro must be used right after the destructor declaration. There is no need for a trailing <code class="computeroutput">";"</code> after the macro closing parenthesis <code class="computeroutput">")"</code>.</p>
<p>For example (see the Tutorial section for more information): </p>
<pre class="programlisting">    template&lt;typename T&gt;
    class myvector {
        ... // Invariants.

    public:
        virtual ~myvector(void) // Destructor declaration.
        BOOST_CONTRACT_DESTRUCTOR( (class) (myvector)
                (public) (virtual) (myvector)( (void) )
        // Never preconditions or postconditions for destructors.
        (body ({
            ... // Actual destructor implementation.
        }) ) // No need for ";" after macro closing parenthesis ")".
        
        ... // Rest of the class.
    };
</pre>
<p><span class="bold"><strong>Parameters:</strong></span> </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><span class="bold"><strong><code class="computeroutput">signature_sequence</code></strong></span></td>
<td>A Boost.Preprocessor sequence of tokens <code class="computeroutput">(1st-token)(2nd-token)...(last-token)</code> that repeats the destructor signature syntactic elements.<div class="itemizedlist"><ul type="disc">
<li><p>The signature tokens are needed by the library to generate the contract code with the function name, the argument types and names, etc as discussed in the Without the Macros section.</p></li>
<li><p>The extra parenthesis <code class="computeroutput">()</code> around the tokens are mandatory (they are the ones making the preprocessor sequence).</p></li>
<li><p>For the body code block, <code class="computeroutput">";"</code> can be specified to separate the destructor definition from its declaration (see <code class="computeroutput">CONTRACT_DESTRUCTOR_BODY()</code>).</p></li>
<li><p>As explained in the Tutorial section, the tokens in <code class="computeroutput">sequence</code> appear in the exact same order as they appear in the destructor declaration followed by the mandatory body code block.</p></li>
<li><p>The destructor <code class="computeroutput">sequence</code> syntax is as follows ([] for optional tokens, {} tokens resulting from parenthesis contents evaluation, || one token or the other):</p></li>
</ul></div>
<code class="computeroutput"> [(template)] (class-type) {(public) || (protected) || (private)} [(virtual)] (class-name)( (void) ) (body) ({ ... }) </code>  </td>
</tr></tbody>
</table></div>
<p>
</p>
<p><span class="bold"><strong>Returns:</strong></span> See the Without the Macro section for examples of the code generated by this macro expansion. </p>
<div class="itemizedlist"><ul type="disc">
<li><p>If contract compilation is turned on, this macro expands to the destructor contract. </p></li>
<li><p>Otherwise, if contract compilation is turned off, this macro expands to just the destructor function body using body code block (and no contract overhead is added).</p></li>
</ul></div>
<p>
<span class="bold"><strong>Note:</strong></span> Destructor have no argument so <code class="computeroutput">(void)</code> must always be used in <code class="computeroutput">(class-name)( (void) )</code> to specify the empty argument list within <code class="computeroutput">sequence</code>. This is because ISO standard C++ does not allow for empty macro parameters (this library also supports <code class="computeroutput">(class-name)( )</code> but this will only compile on C99 so its use is not recommended -- see the Tutorial section for more information).</p>
<p><span class="bold"><strong>Note:</strong></span> In comparing the <code class="computeroutput">sequence</code> syntax of destructors with the one of member functions from <code class="computeroutput">CONTRACT_FUNCTION()</code>, note the following differences (see also the Destructor Call Semantics in the Tutorial section): There is no <code class="computeroutput">(copyable)</code> before class-type because there are no postconditions; There is no <code class="computeroutput">(inherit)</code> because destructors cannot directly subcontract; There is no function template keyword and arguments because destructors cannot be template functions; There is no <code class="computeroutput">(static)</code> because destructors cannot be static; There is no <code class="computeroutput">(result-type)</code> because destructors have no return value; The function-name must be the class-name as always for destructors; The function argument list must be <code class="computeroutput">(void)</code> because destructors take no argument; There is no trailing <code class="computeroutput">(const)</code> because constructor cannot be constant members.</p>
<p><span class="bold"><strong>See:</strong></span> <code class="computeroutput">CONTRACT_ASSERT()</code>, <code class="computeroutput">CONTRACT_INVARIANT()</code>, <code class="computeroutput">CONTRACT_CONSTRUCTOR()</code>, <code class="computeroutput">CONTRACT_FUNCTION()</code> </p>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2009 -2010 Lorenzo Caminiti<p>
        Distributed under the Contract++ Software License, Version 1.0 (see accompanying
        file LICENSE_1_0.txt)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="CONTRACT_CONSTRUCTOR.html"><img src="./doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.macros_hpp"><img src="./doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="index.html"><img src="./doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="CONTRACT_FUNCTION.html"><img src="./doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
