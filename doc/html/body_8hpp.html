<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>dbc/body.hpp File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>dbc/body.hpp File Reference</h1>Header file to only include facilities to split body definition from contract declaration. <a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="body_8hpp.html#ea7a98c2dc3935885607e58813225e60">DBC_BODY</a>(function_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This macro expands to the body function name, it is used to separate the body implementation from its contract specification.  <a href="#ea7a98c2dc3935885607e58813225e60"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="body_8hpp.html#e057f8723886dbe188046aeea280e730">DBC_OPERATOR_BODY</a>(operator_symbol, operator_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This macro expands to the operator body function name, it is used to separate the body implementation from its contract specification for operators.  <a href="#e057f8723886dbe188046aeea280e730"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="body_8hpp.html#b2a724cce3b64ae6dc5d91c7f4ce8f26">DBC_DESTRUCTOR_BODY</a>(class_name)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This macro expands to the destructor body function name, it is used to separate the body implementation from its contract specification for destructors.  <a href="#b2a724cce3b64ae6dc5d91c7f4ce8f26"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Header file to only include facilities to split body definition from contract declaration. 
<p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="ea7a98c2dc3935885607e58813225e60"></a><!-- doxytag: member="body.hpp::DBC_BODY" ref="ea7a98c2dc3935885607e58813225e60" args="(function_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DBC_BODY          </td>
          <td>(</td>
          <td class="paramtype">function_name&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This macro expands to the body function name, it is used to separate the body implementation from its contract specification. 
<p>
This library requires contracts to be listed together with the class declaration as they are part of the code specification (as proposed in [<a class="el" href="Bibliography.html#Ott04">Ott04</a>]). Specifically, class invariants are listed with the class declaration, preconditions and postconditions are listed with the constructor, destructor, and member function declaration. The function body instead is part of the implementation and it can be defined either together with the contract declaration or separately (this is to maintain the C++ ability to separate a function definition from its declaration).<p>
If you want to separate declaration and definition, you can specify <code></code>; as the function body in the contract declaration (as you would normally do in C++) and then define the body separately wrapping the function name with this macro.<p>
For example, in <a class="el" href="Quick_Start.html#A_Complete_Example">A Complete Example</a> all bodies are defined together with their declarations. That example can be reworked as follow to separate body definitions from their declarations: <div class="fragment"><pre class="fragment"><span class="preprocessor">  #include &lt;<a class="code" href="dbc_8hpp.html" title="Header file to include the entire Design By Contract for C++ library.">dbc.hpp</a>&gt;</span>
  
  <span class="comment">// Specification (could be in a header file .hpp).</span>
  
  <span class="keyword">class </span>str <a class="code" href="object_8hpp.html#126883cfec96cafb25d481c5b1e6df61" title="This macro must follow the class type name and it privately derives the class from...">DBC_INHERIT_OBJECT</a>(str) { <span class="comment">// Class declaration.</span>
  <span class="keyword">public</span>:
      <span class="comment">// Member function declaration (signature and contract specification).</span>
      <span class="keywordtype">size_t</span> size() const
      <a class="code" href="mfun_8hpp.html#2872f212b72c32e6254e34086e9714bf" title="This macro must follow the member function declaration matching the specified signature...">DBC_MEM_FUN</a>( (public) (<span class="keywordtype">size_t</span>) (str) (size)() (const), {
          ... <span class="comment">// Preconditions here (keep it simple).</span>
      }, {
          ... <span class="comment">// Postconditions here (keep it simple).</span>
      }, ;) <span class="comment">// ';' indicates body not defined here. </span>
  
  <span class="keyword">private</span>:
      <span class="keywordtype">size_t</span> size_;
      ...
  };
  
  ...
  
  <span class="comment">// Implementation (could be in a separate code file .cpp).</span>
  
  <span class="comment">// Member function definition (body implementation).    </span>
  <span class="keywordtype">size_t</span> <a class="code" href="body_8hpp.html#ea7a98c2dc3935885607e58813225e60" title="This macro expands to the body function name, it is used to separate the body implementation...">std::DBC_BODY</a>(size)() <span class="keyword">const</span> {
      <span class="comment">// Body definition here.</span>
      <span class="keywordflow">return</span> size_;
  }
</pre></div> <small></small><p>
<small> <dl class="note" compact><dt><b>Note:</b></dt><dd>In C++ a function is <em>declared</em> when its signature is specified, and it is <em>defined</em> when its implementation is given (see [<a class="el" href="Bibliography.html#Str97">Str97</a>]). A common reason for separating a function definition from its declaration is to avoid recompiling the function implementation every time. That is usually achieved by listing the declaration in an header file (<code>.hpp</code>) and the definition in a separate code file (<code>.cpp</code>), then the code file is compiled only if the function implementation changes. For example, the header file <code>"add.hpp"</code> would contain the specification: <div class="fragment"><pre class="fragment">      <span class="comment">// File: "add.hpp".</span>
      
      <span class="keywordtype">int</span> <span class="keyword">add</span>(<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; a, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; b); <span class="comment">// Declaration (specification).</span>
</pre></div> While the code file <code>"add.cpp"</code> would contain the implementation: <div class="fragment"><pre class="fragment">      <span class="comment">// File: "add.cpp".</span>
 
<span class="preprocessor">      #include "add.hpp"</span>
 
      <span class="keywordtype">int</span> <span class="keyword">add</span>(<span class="keyword">const</span> <span class="keywordtype">int</span>&amp; a, <span class="keyword">const</span> <span class="keywordtype">int</span>&amp; b) { <span class="comment">// Definition (implementation).</span>
          <span class="keywordflow">return</span> a + b;
      }
</pre></div> Programs would include the header file and be linked with the object file separately compiled from the code file.</dd></dl>
</small> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>function_name</em>&nbsp;</td><td>The function name. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>If preconditions, postconditions, or invariants are checked (<code>DBC_CHECK_REQUIRE_</code>, <code>DBC_CHECK_ENSURE</code>, or <code>DBC_CHECK_INVARIANT</code> symbols are defined at compile-time), this macro expands to a special name for the body function (the actual name is implementation specific). Otherwise, this macro simply expands to the specified function name. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd>Operators and destructors require the special macros <code><a class="el" href="body_8hpp.html#e057f8723886dbe188046aeea280e730" title="This macro expands to the operator body function name, it is used to separate the...">DBC_OPERATOR_BODY()</a></code> and <code><a class="el" href="body_8hpp.html#b2a724cce3b64ae6dc5d91c7f4ce8f26" title="This macro expands to the destructor body function name, it is used to separate the...">DBC_DESTRUCTOR_BODY()</a></code> because their names contain special symbols. <p>
Constructor require the use of the special <code>init()</code> function because of member initializers as discussed in <code><a class="el" href="mfun_8hpp.html#b13901d1e1878203675c38531c6acb43" title="This macro must follow the constructor declaration matching the specified signature...">DBC_CONSTRUCTOR()</a></code>. </dd></dl>

</div>
</div><p>
<a class="anchor" name="b2a724cce3b64ae6dc5d91c7f4ce8f26"></a><!-- doxytag: member="body.hpp::DBC_DESTRUCTOR_BODY" ref="b2a724cce3b64ae6dc5d91c7f4ce8f26" args="(class_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DBC_DESTRUCTOR_BODY          </td>
          <td>(</td>
          <td class="paramtype">class_name&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This macro expands to the destructor body function name, it is used to separate the body implementation from its contract specification for destructors. 
<p>
Functionally this macro is equivalent to <code><a class="el" href="body_8hpp.html#ea7a98c2dc3935885607e58813225e60" title="This macro expands to the body function name, it is used to separate the body implementation...">DBC_BODY()</a></code> (see related documentation) but it handles the special destructor name that is inferred from the class name.<p>
For example, reworking the <a class="el" href="Quick_Start.html#A_Complete_Example">A Complete Example</a> to separate body definitions from their implementations: <div class="fragment"><pre class="fragment"><span class="preprocessor">  #include &lt;<a class="code" href="dbc_8hpp.html" title="Header file to include the entire Design By Contract for C++ library.">dbc.hpp</a>&gt;</span>
  
  <span class="keyword">class </span>str <a class="code" href="object_8hpp.html#126883cfec96cafb25d481c5b1e6df61" title="This macro must follow the class type name and it privately derives the class from...">DBC_INHERIT_OBJECT</a>(str) {
  <span class="keyword">public</span>:
      <span class="keyword">virtual</span> ~str() <span class="comment">// Declaration.</span>
      <a class="code" href="mfun_8hpp.html#a8a977641739ad90988dccb3bac04a13" title="This macro must follow the destructor declaration matching the specified signature...">DBC_DESTRUCTOR</a>( (public) (virtual) (str)(), ;)  <span class="comment">// ';' for body defined</span>
                                                      <span class="comment">// later.</span>
  
  private:
      <span class="keywordtype">char</span>* chars_;
      ...
  };
  
  <span class="keywordtype">char</span>&amp; str::<a class="code" href="body_8hpp.html#b2a724cce3b64ae6dc5d91c7f4ce8f26" title="This macro expands to the destructor body function name, it is used to separate the...">DBC_DESTRUCTOR_BODY</a>(str)() { <span class="comment">// Definition.</span>
      <span class="comment">// Body definition here.</span>
      <span class="keyword">delete</span>[] chars_;
  }
</pre></div> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>class_name</em>&nbsp;</td><td>The class name (the plain type name, no namespace prefix, no template parameters, etc). </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>If preconditions, postconditions, or invariants are checked (<code>DBC_CHECK_REQUIRE_</code>, <code>DBC_CHECK_ENSURE</code>, or <code>DBC_CHECK_INVARIANT</code> symbols are defined at compile-time), this macro expands to a special name for the destructor body function (the actual name is implementation specific). Otherwise, this macro expands to the destructor name <code>~class_name</code>. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><code><a class="el" href="body_8hpp.html#ea7a98c2dc3935885607e58813225e60" title="This macro expands to the body function name, it is used to separate the body implementation...">DBC_BODY()</a></code> for more information. </dd></dl>

</div>
</div><p>
<a class="anchor" name="e057f8723886dbe188046aeea280e730"></a><!-- doxytag: member="body.hpp::DBC_OPERATOR_BODY" ref="e057f8723886dbe188046aeea280e730" args="(operator_symbol, operator_name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DBC_OPERATOR_BODY          </td>
          <td>(</td>
          <td class="paramtype">operator_symbol,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">operator_name&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This macro expands to the operator body function name, it is used to separate the body implementation from its contract specification for operators. 
<p>
Functionally this macro is equivalent to <code><a class="el" href="body_8hpp.html#ea7a98c2dc3935885607e58813225e60" title="This macro expands to the body function name, it is used to separate the body implementation...">DBC_BODY()</a></code> (see related documentation) but it handles the special operator symbols (<code>==</code>, <code>&lt;</code>, etc) which cannot be treated as the regular function names that only contain letters and numbers.<p>
For example, reworking the <a class="el" href="Quick_Start.html#A_Complete_Example">A Complete Example</a> to separate body definitions from their implementations: <div class="fragment"><pre class="fragment"><span class="preprocessor">  #include &lt;<a class="code" href="dbc_8hpp.html" title="Header file to include the entire Design By Contract for C++ library.">dbc.hpp</a>&gt;</span>
  
  <span class="keyword">class </span>str <a class="code" href="object_8hpp.html#126883cfec96cafb25d481c5b1e6df61" title="This macro must follow the class type name and it privately derives the class from...">DBC_INHERIT_OBJECT</a>(str) {
  <span class="keyword">public</span>:
      <span class="keywordtype">char</span>&amp; operator[](<span class="keyword">const</span> <span class="keywordtype">size_t</span>&amp; index) <span class="comment">// Declaration.</span>
      <a class="code" href="mfun_8hpp.html#2872f212b72c32e6254e34086e9714bf" title="This macro must follow the member function declaration matching the specified signature...">DBC_MEM_FUN</a>( (<span class="keyword">public</span>) (<span class="keywordtype">char</span>&amp;) <a class="code" href="post_8hpp.html#b10fbb20732d114633c59fa07be8222a" title="This macro marks the specified type copyable so its value before the body execution...">DBC_COPYABLE</a>(str)
              (operator_at)( (<span class="keyword">const</span> <span class="keywordtype">size_t</span>&amp;)(index) ), {
          ... <span class="comment">// Member function preconditions.</span>
      }, {
          ... <span class="comment">// Member function postconditions.</span>
      }, ;) <span class="comment">// ';' indicates body not defined here.</span>
  
  <span class="keyword">private</span>:
      <span class="keywordtype">char</span>* chars_;
      ...
  };
  
  <span class="comment">// Definition (must use same 'operator_at' name as in contract declaration).</span>
  <span class="keywordtype">char</span>&amp; <a class="code" href="body_8hpp.html#e057f8723886dbe188046aeea280e730" title="This macro expands to the operator body function name, it is used to separate the...">str::DBC_OPERATOR_BODY</a>(<span class="keyword">operator</span>[], operator_at)(<span class="keyword">const</span> <span class="keywordtype">size_t</span>&amp; index) {
      <span class="comment">// Body definition here.</span>
      <span class="keywordflow">return</span> chars_[index];
  }
</pre></div> <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>operator_symbol</em>&nbsp;</td><td>The operator name with symbols (e.g., <code>operator</code> == , <code>operator&lt;</code>, etc). </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>operator_name</em>&nbsp;</td><td>The operator name without symbols. This name is arbitrary but it must match the one specified in the contract declaration and it is recommended to still use the <code>operator</code> word as prefix (e.g., <code>operator_equal</code>, <code>operator_less</code>, etc). </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>If preconditions, postconditions, or invariants are checked (<code>DBC_CHECK_REQUIRE_</code>, <code>DBC_CHECK_ENSURE</code>, or <code>DBC_CHECK_INVARIANT</code> symbols are defined at compile-time), this macro expands to a special name for the specified operator body function <em>operator_name</em> (the actual name is implementation specific). Otherwise, this macro expands to the specified <em>operator_symbol</em>. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><code><a class="el" href="body_8hpp.html#ea7a98c2dc3935885607e58813225e60" title="This macro expands to the body function name, it is used to separate the body implementation...">DBC_BODY()</a></code> for more information. </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Sat Nov 21 11:16:02 2009 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
