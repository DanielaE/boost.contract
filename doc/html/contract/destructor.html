<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Class template destructor</title>
<link rel="stylesheet" href="../doc/html/boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.73.2">
<link rel="start" href="../index.html" title="Contract++ 0.3.469">
<link rel="up" href="../reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.destructor_hpp" title="Header &lt;contract/destructor.hpp&gt;">
<link rel="prev" href="../CONTRACT_CHECK_POSTCONDITION.html" title="Macro CONTRACT_CHECK_POSTCONDITION">
<link rel="next" href="from.html" title="Type from">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="spirit-nav">
<a accesskey="p" href="../CONTRACT_CHECK_POSTCONDITION.html"><img src=".././doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.destructor_hpp"><img src=".././doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src=".././doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="from.html"><img src=".././doc/html/images/next.png" alt="Next"></a>
</div>
<hr>
<div class="refentry" lang="en">
<a name="contract.destructor"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class template destructor</span></h2>
<p>contract::destructor</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="emphasis"><em>// In header: &lt;<a class="link" href="../reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.destructor_hpp" title="Header &lt;contract/destructor.hpp&gt;">contract/destructor.hpp</a>&gt;

</em></span><span class="bold"><strong>template</strong></span>&lt;<span class="bold"><strong>typename</strong></span> F&gt; 
<span class="bold"><strong>class</strong></span> <a class="link" href="destructor.html" title="Class template destructor">destructor</a> : <span class="bold"><strong>public</strong></span> contract::nonstatic_member_function&lt; F &gt; {
<span class="bold"><strong>public</strong></span>:
  <span class="emphasis"><em>// <a class="link" href="destructor.html#contract.destructorconstruct-copy-destruct">construct/copy/destruct</a></em></span>
  <a class="link" href="destructor.html#id2344864-bb">destructor</a>(__BodyFunctionPointer__);
  <a class="link" href="destructor.html#id2344927-bb">~destructor</a>();

  <span class="emphasis"><em>// <a class="link" href="destructor.html#id2344824-bb">public member functions</a></em></span>
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="destructor.html#id2344828-bb">call</a>(__MaybeConstClassPointer__) ;
};</pre></div>
<div class="refsect1" lang="en">
<a name="id2655387"></a><h2>Description</h2>
<p>Class template used to write contracts for destructors.</p>
<p><span class="bold"><strong>Note:</strong></span> Only the differences between this class and the <code class="computeroutput">contract::nonstatic_member_function</code> class are documented here. Read the <code class="computeroutput">contract::nonstatic_member_function</code> documentation first.</p>
<p>The <code class="computeroutput">CONTRACT_DESTRUCTOR()</code> macro expands to code that uses this class template (see the Without the Macros section) -- whenever possible, use the macro instead of using this class template directly. Rarely, it might be needed to use this class template directly to implement workarounds for compilers that do not fully comply with the ISO C++ standard.</p>
<p><span class="bold"><strong>Parameters:</strong></span> </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><span class="bold"><strong><code class="computeroutput">F</code></strong></span></td>
<td>The function type for the destructor being contracted. </td>
</tr></tbody>
</table></div>
<p>
</p>
<p>Base contract classes cannot be specified because destructors do not directly subcontract (C++ object destruction mechanism will automatically invoke base class contracts when they are present).</p>
<p>The function type <code class="computeroutput">F</code> must be specified as follows: </p>
<pre class="programlisting">    void (ClassType::*)()
</pre>
<p> Note: </p>
<div class="itemizedlist"><ul type="disc">
<li><p>The result type is always <code class="computeroutput">void</code> because destructors return no value. </p></li>
<li><p><code class="computeroutput">ClassType</code> is never <code class="computeroutput">const</code> because destructors can never be constant members (as they modify the object by destructing it). </p></li>
<li><p><code class="computeroutput">ClassType</code> cannot be tagged <code class="computeroutput">contract::copyable</code> because there is no object before destructor body execution (it has not been destructed yet) -- the library will generate a compile-time error otherwise. </p></li>
<li><p>There is no function argument type because destructors take no argument.</p></li>
</ul></div>
<p>
<span class="bold"><strong>See:</strong></span> Without the Macros section, <code class="computeroutput">contract::nonstatic_member_function</code> </p>
<div class="refsect2" lang="en">
<a name="id2655544"></a><h3>
<a name="contract.destructorconstruct-copy-destruct"></a><code class="computeroutput">destructor</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol type="1">
<li>
<pre class="literallayout"><a name="id2344864-bb"></a>destructor(__BodyFunctionPointer__ body_function);</pre>
<p>Construct this contract object using the specified body.</p>
<p>No precondition and no postcondition function is specified (destructors only check class invariants). This is because destructors have no arguments so there are no preconditions, in addition there is no object after destructor body execution so there are no postconditions (see Tutorial section for more information).</p>
<p><span class="bold"><strong>Parameters:</strong></span> </p>
<div class="informaltable"><table class="table">
<colgroup>
<col>
<col>
</colgroup>
<tbody><tr>
<td><span class="bold"><strong><code class="computeroutput">body_function</code></strong></span></td>
<td>A pointer to the function executing the body. </td>
</tr></tbody>
</table></div>
<p>
</p>
<p>The body function pointer type is defined as follows: </p>
<pre class="programlisting">        typedef void (ClassType::* __BodyFunctionPointer__)();
</pre>
<p> </p>
<div class="itemizedlist"><ul type="disc"><li><p>Destructor body takes no argument. </p></li></ul></div>
<p>
</p>
</li>
<li>
<pre class="literallayout"><a name="id2344927-bb"></a>~destructor();</pre>
<p>Destroy this contract object. </p>
</li>
</ol></div>
</div>
<div class="refsect2" lang="en">
<a name="id2655653"></a><h3>
<a name="id2344824-bb"></a><code class="computeroutput">destructor</code> public member functions</h3>
<div class="orderedlist"><ol type="1"><li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id2344828-bb"></a>call(__MaybeConstClassPointer__ object) ;</pre>
<p>Check the contract and executes the member function body.</p>
<p>Refer to the <code class="computeroutput">contract::nonstatic_member_function</code> documentation.</p>
<p>Accordingly with <code class="computeroutput">F</code>, the <code class="computeroutput">call()</code> function always returns void and it takes no argument. </p>
</li></ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2009 -2010 Lorenzo Caminiti<p>
        Distributed under the Contract++ Software License, Version 1.0 (see accompanying
        file LICENSE_1_0.txt)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="../CONTRACT_CHECK_POSTCONDITION.html"><img src=".././doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../reference.html#header..home.lcaminiti.sandbox.dbcpp_sourceforge.boost-quickbook.doc.qbk.src.contract.destructor_hpp"><img src=".././doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../index.html"><img src=".././doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="from.html"><img src=".././doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
