<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>dbc/assertion.hpp File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.5 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>dbc/assertion.hpp File Reference</h1>Header file to only include facilities for assertions. <a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Namespaces</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">namespace &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacedbc.html">dbc</a></td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdbc_1_1assertion.html">dbc::assertion</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Class to write assertions.  <a href="classdbc_1_1assertion.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdbc_1_1oassertionstream.html">dbc::oassertionstream</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Class to write assertions reporting verbose error messages.  <a href="classdbc_1_1oassertionstream.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdbc_1_1raise.html">dbc::raise&lt; E &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modifier to cause an assertion-stream to throw the specified exception.  <a href="classdbc_1_1raise.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdbc_1_1uraise.html">dbc::uraise&lt; E &gt;</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modifier to cause an assertion-stream to throw the specified exception.  <a href="classdbc_1_1uraise.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdbc_1_1exit.html">dbc::exit</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modifier to cause an assertion-stream to <a class="el" href="classdbc_1_1exit.html" title="Modifier to cause an assertion-stream to exit the program with the specified code...">exit</a> the program with the specified code.  <a href="classdbc_1_1exit.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdbc_1_1terminate.html">dbc::terminate</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modifier to cause an assertion-stream to <a class="el" href="classdbc_1_1terminate.html" title="Modifier to cause an assertion-stream to terminate the program.">terminate</a> the program.  <a href="classdbc_1_1terminate.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="assertion_8hpp.html#393d8bc235939371624484cdda853395">DBC_ASSERT</a>(condition, label)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assert the specified condition, intended to be used to assert preconditions, postconditions, and invariants.  <a href="#393d8bc235939371624484cdda853395"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="assertion_8hpp.html#7f1678c1e2a86b6d044d8a90af6a81ff">DBC_ASSERT_STREAM</a>(condition, label, stream_error)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Assert the specified condition allowing to indicate the action to take in case the condition is false, intended to be used to assert preconditions, postconditions, and invariants.  <a href="#7f1678c1e2a86b6d044d8a90af6a81ff"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Header file to only include facilities for assertions. 
<p>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="393d8bc235939371624484cdda853395"></a><!-- doxytag: member="assertion.hpp::DBC_ASSERT" ref="393d8bc235939371624484cdda853395" args="(condition, label)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DBC_ASSERT          </td>
          <td>(</td>
          <td class="paramtype">condition,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">label&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Assert the specified condition, intended to be used to assert preconditions, postconditions, and invariants. 
<p>
This macro expands to code that uses <code><a class="el" href="classdbc_1_1assertion.html" title="Class to write assertions.">dbc::assertion</a></code> to assert the specified condition with the specified label. The macros <code>__FILE__</code> and <code>__LINE__</code> are automatically used to indicate the location of the assertion, and the condition's code is used for the description message. Furthermore, the assertion generated by this macro is automatically documented (see Automatic_Contract_Documentation).<p>
In case the asserted condition is false, this macro will either throw a <code><a class="el" href="classdbc_1_1condition__violation.html" title="Base class for all contract violation exceptions.">dbc::condition_violation</a></code> exception (default), call C++ <code>exit()</code>, or call C++ <code>std::terminate()</code> depending on the value of <code>DBC_CONFIG_DEFAULT_ON_ASSERTION_VIOLATION</code>.<p>
For an example (from <a class="el" href="Quick_Start.html#A_Complete_Example">A Complete Example</a>): <div class="fragment"><pre class="fragment"><span class="preprocessor">  #include &lt;<a class="code" href="dbc_8hpp.html" title="Header file to include the entire Design By Contract for C++ library.">dbc.hpp</a>&gt;</span>
  
  <span class="keyword">class </span>str <a class="code" href="object_8hpp.html#126883cfec96cafb25d481c5b1e6df61" title="This macro must follow the class type name and it privately derives the class from...">DBC_INHERIT_OBJECT</a>(str) {
  <span class="keyword">public</span>:
      <span class="keywordtype">char</span>&amp; operator[](<span class="keyword">const</span> <span class="keywordtype">size_t</span>&amp; index)
      <a class="code" href="mfun_8hpp.html#2872f212b72c32e6254e34086e9714bf" title="This macro must follow the member function declaration matching the specified signature...">DBC_MEM_FUN</a>( (<span class="keyword">public</span>) (<span class="keywordtype">char</span>&amp;) <a class="code" href="post_8hpp.html#b10fbb20732d114633c59fa07be8222a" title="This macro marks the specified type copyable so its value before the body execution...">DBC_COPYABLE</a>(str)
              (operator_at)( (<span class="keyword">const</span> <span class="keywordtype">size_t</span>&amp;)(index) ), {
          <span class="comment">// Member function preconditions.</span>
          <a class="code" href="assertion_8hpp.html#393d8bc235939371624484cdda853395" title="Assert the specified condition, intended to be used to assert preconditions, postconditions...">DBC_ASSERT</a>(index &gt;= 0 &amp;&amp; index &lt; <span class="keyword">self</span>.size(), <span class="stringliteral">"index in range"</span>);
      }, {
          <span class="comment">// Member function postconditions.</span>
          <span class="comment">// Not a const mem fun, use 'self.old' for object before body.</span>
          <a class="code" href="assertion_8hpp.html#393d8bc235939371624484cdda853395" title="Assert the specified condition, intended to be used to assert preconditions, postconditions...">DBC_ASSERT</a>(result == <span class="keyword">self</span>.old.chars_[index.now],
                  <span class="stringliteral">"returning char at index"</span>);
      }, {
          <span class="comment">// Member function body.</span>
          <span class="keywordflow">return</span> chars_[index];
      })
      
  <span class="keyword">private</span>:
      <span class="keywordtype">char</span>* chars_;
      ...
  };
</pre></div><p>
<dl class="note" compact><dt><b>Note:</b></dt><dd>This macro is mainly used for convenience to avoid repeating <code>__FILE__</code> and <code>__LINE__</code>, avoid writing the <code>#ifdef DBC</code> guard by hand, and to support automatic contract documentation. It is recommended to use this macro instead of using <code>dbc::assert</code> directly. For example: <div class="fragment"><pre class="fragment"><span class="preprocessor">      #include &lt;<a class="code" href="dbc_8hpp.html" title="Header file to include the entire Design By Contract for C++ library.">dbc.hpp</a>&gt;</span>
      ...
      
      <a class="code" href="assertion_8hpp.html#393d8bc235939371624484cdda853395" title="Assert the specified condition, intended to be used to assert preconditions, postconditions...">DBC_ASSERT</a>(1 &lt; 2, <span class="stringliteral">"1 less than 2"</span>)
</pre></div> is essentially equivalent to <div class="fragment"><pre class="fragment"><span class="preprocessor">      #include &lt;<a class="code" href="dbc_8hpp.html" title="Header file to include the entire Design By Contract for C++ library.">dbc.hpp</a>&gt;</span>
      ...
 
<span class="preprocessor">      #ifdef DBC</span>
<span class="preprocessor"></span>      dbc::assert(1 &lt; 2, <span class="stringliteral">"1 less than 2"</span>, __FILE__, __LINE__,
              <span class="stringliteral">"1 &lt; 2"</span>).raise();
              <span class="comment">// or .exit(1), or .terminate() depending on</span>
              <span class="comment">// DBC_CONFIG_DEFAULT_ON_ASSERTION_VIOLATION.</span>
<span class="preprocessor">      #endif // DBC</span>
</pre></div></dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>condition</em>&nbsp;</td><td>A C++ expression that evaluates to a <code>bool</code> value. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>label</em>&nbsp;</td><td>A C++ <code>std::string</code> <em>shortly</em> describing the assertion in a human readable form. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>If preconditions, postconditions, or invariants are checked (<code>DBC_CHECK_REQUIRE_</code>, <code>DBC_CHECK_ENSURE</code>, or <code>DBC_CHECK_INVARIANT</code> symbols are defined at compile-time), this macro expands to code that assert the specified condition using from <code><a class="el" href="classdbc_1_1assertion.html" title="Class to write assertions.">dbc::assertion</a></code>. Otherwise, this macro expands to nothing. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd>To specify the action to take on condition violation, use <code><a class="el" href="assertion_8hpp.html#7f1678c1e2a86b6d044d8a90af6a81ff" title="Assert the specified condition allowing to indicate the action to take in case the...">DBC_ASSERT_STREAM()</a></code>. <p>
Use <code><a class="el" href="config_8hpp.html#b7cecf0c16a98a89c47bba54e42d4038" title="Whether assertions that throw are checked or not (default: true).">DBC_CONFIG_ENABLE_THROWING_ASSERTIONS</a></code>, <code>DBC_CONFIG_ENABLE_EXITION_ASSERTIONS</code>, <code><a class="el" href="config_8hpp.html#99534b11c6f6e26e4cc6d1e89af409ec" title="Whether assertions that terminate are checked or not (default: true).">DBC_CONFIG_ENABLE_TERMINATING_ASSERTIONS</a></code> to enable or disable run-time checking of assertions that throw, exit, or terminate respectively. </dd></dl>

</div>
</div><p>
<a class="anchor" name="7f1678c1e2a86b6d044d8a90af6a81ff"></a><!-- doxytag: member="assertion.hpp::DBC_ASSERT_STREAM" ref="7f1678c1e2a86b6d044d8a90af6a81ff" args="(condition, label, stream_error)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DBC_ASSERT_STREAM          </td>
          <td>(</td>
          <td class="paramtype">condition,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">label,         <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">stream_error&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Assert the specified condition allowing to indicate the action to take in case the condition is false, intended to be used to assert preconditions, postconditions, and invariants. 
<p>
This macro expands to code that uses <code>dbc::assertionstream</code> to assert the specified condition with the specified label. The macros <code>__FILE__</code> and <code>__LINE__</code> are automatically used to indicate the location of the assertion, and the condition's code is used for the description message. Furthermore, the assertion generated by this macro is automatically documented (see Automatic_Contract_Documentation).<p>
In case the asserted condition is false, this macro will execute the specified <em>stream_error</em> code expression. In this code expression, the <code>dbc::assertionstream</code> object can be accessed via the declared local variable <code>err</code> automatically declared by the macro. The <em>stream_error</em> can be used to specify a more descriptive error message (printing variable values, etc) and also to specify the action to take in case of assertion violation using <code><a class="el" href="classdbc_1_1raise.html" title="Modifier to cause an assertion-stream to throw the specified exception.">dbc::raise</a></code>, <code><a class="el" href="classdbc_1_1uraise.html" title="Modifier to cause an assertion-stream to throw the specified exception.">dbc::uraise</a></code>, <code><a class="el" href="classdbc_1_1exit.html" title="Modifier to cause an assertion-stream to exit the program with the specified code...">dbc::exit</a></code>, or <code><a class="el" href="classdbc_1_1terminate.html" title="Modifier to cause an assertion-stream to terminate the program.">dbc::terminate</a></code>. If no action is taken by <em>stream_error</em>, the default action specified by <code>DBC_CONFIG_DEFAULT_ON_ASSERTION_VIOLATION</code> is taken.<p>
For an example (adapted from <a class="el" href="Quick_Start.html#A_Complete_Example">A Complete Example</a>): <div class="fragment"><pre class="fragment"><span class="preprocessor">  #include &lt;<a class="code" href="dbc_8hpp.html" title="Header file to include the entire Design By Contract for C++ library.">dbc.hpp</a>&gt;</span>
<span class="preprocessor">  #include &lt;stdexcept&gt;</span>
  
  <span class="keyword">class </span>str <a class="code" href="object_8hpp.html#126883cfec96cafb25d481c5b1e6df61" title="This macro must follow the class type name and it privately derives the class from...">DBC_INHERIT_OBJECT</a>(str) {
  <span class="keyword">public</span>:
      <span class="keywordtype">char</span>&amp; operator[](<span class="keyword">const</span> <span class="keywordtype">size_t</span>&amp; index)
      <a class="code" href="mfun_8hpp.html#2872f212b72c32e6254e34086e9714bf" title="This macro must follow the member function declaration matching the specified signature...">DBC_MEM_FUN</a>( (<span class="keyword">public</span>) (<span class="keywordtype">char</span>&amp;) <a class="code" href="post_8hpp.html#b10fbb20732d114633c59fa07be8222a" title="This macro marks the specified type copyable so its value before the body execution...">DBC_COPYABLE</a>(str)
              (operator_at)( (<span class="keyword">const</span> <span class="keywordtype">size_t</span>&amp;)(index) ), {
          <span class="comment">// Member function preconditions.</span>
          <span class="comment">// Log detailed error message and throw user defined exception.</span>
          <a class="code" href="assertion_8hpp.html#7f1678c1e2a86b6d044d8a90af6a81ff" title="Assert the specified condition allowing to indicate the action to take in case the...">DBC_ASSERT_STREAM</a>(index &gt;= 0 &amp;&amp; index &lt; <span class="keyword">self</span>.size(),
                  <span class="stringliteral">"index in range"</span>, err &lt;&lt; <span class="stringliteral">"index "</span> &lt;&lt; index
                  &lt;&lt; <span class="stringliteral">" not in range [0, "</span> &lt;&lt; <span class="keyword">self</span>.size() &lt;&lt; <span class="stringliteral">")"</span>
                  &lt;&lt; <a class="code" href="classdbc_1_1uraise.html" title="Modifier to cause an assertion-stream to throw the specified exception.">dbc::uraise&lt;std::out_of_range&gt;</a>(
                  std::out_of_range(err.str()));
      }, {
          ... <span class="comment">// Member function postconditions.</span>
      }, {
          ... <span class="comment">// Member function body.</span>
      })
  
      ...
  };
</pre></div> Similarly: <div class="fragment"><pre class="fragment"><span class="preprocessor">  #include &lt;<a class="code" href="dbc_8hpp.html" title="Header file to include the entire Design By Contract for C++ library.">dbc.hpp</a>&gt;</span>    
  ...
  
  <span class="keyword">const</span> <span class="keywordtype">int</span> count = -1;
  <span class="comment">// On violation do as from DBC_CONFIG_DEFAULT_ON_ASSERTION_VIOLATION.</span>
  <a class="code" href="assertion_8hpp.html#393d8bc235939371624484cdda853395" title="Assert the specified condition, intended to be used to assert preconditions, postconditions...">DBC_ASSERT</a>(count &gt; 0, <span class="stringliteral">"count positive"</span>);
  <span class="comment">// Same action as above but prints count in error message.</span>
  <a class="code" href="assertion_8hpp.html#7f1678c1e2a86b6d044d8a90af6a81ff" title="Assert the specified condition allowing to indicate the action to take in case the...">DBC_ASSERT_STREAM</a>(count &gt; 0, <span class="stringliteral">"count positive"</span>,
          err &lt;&lt; <span class="stringliteral">"count "</span> &lt;&lt; count &lt;&lt; <span class="stringliteral">" negative"</span>);
  <span class="comment">// Throws dbc::condition_violation and prints count in error message.</span>
  <a class="code" href="assertion_8hpp.html#7f1678c1e2a86b6d044d8a90af6a81ff" title="Assert the specified condition allowing to indicate the action to take in case the...">DBC_ASSERT_STREAM</a>(count &gt; 0, <span class="stringliteral">"count positive"</span>,
          err &lt;&lt; <span class="stringliteral">"count "</span> &lt;&lt; count &lt;&lt; <span class="stringliteral">" negative"</span> &lt;&lt; <a class="code" href="classdbc_1_1raise.html" title="Modifier to cause an assertion-stream to throw the specified exception.">dbc::raise</a>());
  <span class="comment">// Throws user's defined int(-1) exception.</span>
  <a class="code" href="assertion_8hpp.html#7f1678c1e2a86b6d044d8a90af6a81ff" title="Assert the specified condition allowing to indicate the action to take in case the...">DBC_ASSERT_STREAM</a>(count &gt; 0, <span class="stringliteral">"count positive"</span>,
          err &lt;&lt; <a class="code" href="classdbc_1_1uraise.html" title="Modifier to cause an assertion-stream to throw the specified exception.">dbc::uraise&lt;int&gt;</a>(<span class="keywordtype">int</span>(count)));
  <span class="comment">// Exits with code 5.</span>
  <a class="code" href="assertion_8hpp.html#7f1678c1e2a86b6d044d8a90af6a81ff" title="Assert the specified condition allowing to indicate the action to take in case the...">DBC_ASSERT_STREAM</a>(count &gt; 0, <span class="stringliteral">"count positive"</span>, err &lt;&lt; <a class="code" href="classdbc_1_1exit.html" title="Modifier to cause an assertion-stream to exit the program with the specified code...">dbc::exit</a>(5));
  <span class="comment">// Terminates.</span>
  <a class="code" href="assertion_8hpp.html#7f1678c1e2a86b6d044d8a90af6a81ff" title="Assert the specified condition allowing to indicate the action to take in case the...">DBC_ASSERT_STREAM</a>(count &gt; 0, <span class="stringliteral">"count positive"</span>, err &lt;&lt; <a class="code" href="classdbc_1_1terminate.html" title="Modifier to cause an assertion-stream to terminate the program.">dbc::terminate</a>());
</pre></div><p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>condition</em>&nbsp;</td><td>A C++ expression that evaluates to a <code>bool</code> value. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>label</em>&nbsp;</td><td>A C++ <code>std::string</code> <em>shortly</em> describing the assertion in a human readable form. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>stream_error</em>&nbsp;</td><td>A code expression where the <code>dbc::assertionstream</code> object can be accessed via the local variable <code>err</code>. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>If preconditions, postconditions, or invariants are checked (<code>DBC_CHECK_REQUIRE_</code>, <code>DBC_CHECK_ENSURE</code>, or <code>DBC_CHECK_INVARIANT</code> symbols are defined at compile-time), this macro expands to code that assert the specified condition using from <code>dbc::assertionstream</code>. Otherwise, this macro expands to nothing. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd>If there is no need for a more descriptive error message or to specify the action to take on condition violation, use the simpler <code><a class="el" href="assertion_8hpp.html#393d8bc235939371624484cdda853395" title="Assert the specified condition, intended to be used to assert preconditions, postconditions...">DBC_ASSERT()</a></code>. <p>
Use <code><a class="el" href="config_8hpp.html#b7cecf0c16a98a89c47bba54e42d4038" title="Whether assertions that throw are checked or not (default: true).">DBC_CONFIG_ENABLE_THROWING_ASSERTIONS</a></code>, <code>DBC_CONFIG_ENABLE_EXITIONG_ASSERTIONS</code>, <code><a class="el" href="config_8hpp.html#99534b11c6f6e26e4cc6d1e89af409ec" title="Whether assertions that terminate are checked or not (default: true).">DBC_CONFIG_ENABLE_TERMINATING_ASSERTIONS</a></code> to enable or disable run-time checking of assertions that throw, exit, or terminate respectively. </dd></dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Jun 17 15:39:36 2009 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.5 </small></address>
</body>
</html>
